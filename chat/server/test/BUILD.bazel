load("@com_github_grpc_grpc//bazel:python_rules.bzl", "py_grpc_library", "py_proto_library")
load("@pycstl_deps//:requirements.bzl", "requirement")

# proto
py_proto_library(
    name = "status_py_proto",
    deps = ["//chat/server/proto:status_proto"],
)

py_grpc_library(
    name = "status_py_grpc",
    srcs = ["//chat/server/proto:status_proto"],
    deps = [":status_py_proto"],
)

# test
py_test(
    name = "run_all_test",
    srcs = [
        "chat_server_test.py",
        "gate_server_test.py",
        "run_all_test.py",
        "status_server_test.py",
        "test_define.py",
    ],
    data = [
        "//chat/server/chat_server",
        "//chat/server/gate_server",
        "//chat/server/status_server",
    ],
    imports = ["."],
    deps = [
        requirement("redis"),
        ":status_py_grpc",
    ],
)
